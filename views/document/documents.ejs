<%- include('../components/head.ejs') %>

  <div class="card mt-3 bg-gray-light p-5">
    <% if (user.reviewer == 0) { %>
    <a href="/documents/upload" class="btn btn-success btn-lg" role="button" aria-disabled="true">อัปโหลดเอกสาร</a>
    <% } %>
    <div class="container pending-table mt-2 ">
      <!--Create Table that loop document data from pendingDoc Map in index.js-->
      <h2>รอการตรวจจากคุณ</h2>
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Document Name</th>
            <th scope="col">Document AuthorName</th>
            <th scope="col">Document department</th>
            <th scope="col">Document Status</th>
            <th scope="col">Checked</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <% for (var i=0; i < documents.yourWork.length; i++) { %>
            <tr>
              <th scope="row">
                <%= documents.yourWork[i].name %>
              </th>
              <td>
                <%= documents.yourWork[i].author %>
              </td>
              <td>
                <%= documents.yourWork[i].department %>
              </td>
              <td>
                <%= documents.yourWork[i].status %>
              </td>
              <td>
                <%= documents.yourWork[i].reviewer %>
              </td>
              <td>
                <a href="documents/view/<%= documents.yourWork[i]._id %>" class="btn btn-primary">View</a>
              </td>
            </tr>
            <% } %>
        </tbody>
      </table>
      <h2 class="mt-2">รอการตรวจทั้งหมด</h2>
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Document Name</th>
            <th scope="col">Document AuthorName</th>
            <th scope="col">Document department</th>
            <th scope="col">Document Status</th>
            <th scope="col">Checked</th>
          </tr>
        </thead>
        <tbody>
          <% for (var i=0; i < documents.pendingDoc.length; i++) { %>
            <tr>
              <th scope="row">
                <%= documents.pendingDoc[i].name %>
              </th>
              <td>
                <%= documents.pendingDoc[i].author %>
              </td>
              <td>
                <%= documents.pendingDoc[i].department %>
              </td>
              <td>
                <%= documents.pendingDoc[i].status %>
              </td>
              <td>
                <%= documents.pendingDoc[i].reviewer %>
              </td>
            </tr>
            <% } %>
        </tbody>
      </table>
      <h2 class="mt-2">ไม่ผ่าน</h2>
      <table class="table table-hover table-bordered border-danger">
        <thead>
          <tr>
            <th scope="col">Document Name</th>
            <th scope="col">Document AuthorName</th>
            <th scope="col">Document department</th>
            <th scope="col">Document Status</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <% for (var i=0; i < documents.rejectedDoc.length; i++) { %>
            <tr>
              <th scope="row">
                <%= documents.rejectedDoc[i].name %>
              </th>
              <td>
                <%= documents.rejectedDoc[i].author %>
              </td>
              <td>
                <%= documents.rejectedDoc[i].department %>
              </td>
              <td>
                <%= documents.rejectedDoc[i].status %>
              </td>
              <td>
                <a href="documents/view/<%= documents.rejectedDoc[i]._id %>" class="btn btn-primary">View</a>
              </td>
            </tr>
            <% } %>
        </tbody>
      </table>

    </div>
  </div>